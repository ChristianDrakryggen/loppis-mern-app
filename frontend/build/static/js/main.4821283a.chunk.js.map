{"version":3,"sources":["services/AuthService.js","context/AuthContext.js","context/BasketContext.js","components/Basket.js","components/Navbar.js","components/Store.js","services/UserService.js","components/Loppis.js","components/Login.js","components/Register.js","services/OrderService.js","services/AddressService.js","components/CheckoutItem.js","components/Checkout.js","services/ProductService.js","components/OrderItem.js","components/PersonalInfo.js","components/Products.js","components/Address.js","components/Account.js","components/InsideStore.js","hocs/PrivateRoute.js","hocs/UnPrivateRoute.js","App.js","index.js"],"names":["user","fetch","method","body","JSON","stringify","headers","then","res","json","data","status","isAuthenticated","_id","username","message","msgBody","msgError","AuthContext","createContext","children","useState","setUser","setIsAuthenticated","isLoaded","setIsLoaded","useEffect","AuthService","Provider","value","BasketContext","basket","setBasket","showBasket","setShowBasket","fromStorage","parse","localStorage","getItem","Basket","basketContext","useContext","style","display","alignItems","justifyContent","borderBottom","padding","length","slice","filter","v","i","a","findIndex","t","map","product","paddingRight","name","count","price","onClick","item","setItem","removeFromBasket","id","reduce","partialSum","total","Navbar","authContext","history","useHistory","logOut","success","push","to","margin","fontWeight","Store","props","store","marginRight","border","personalInfo","Loppis","stores","setStores","UserService","users","console","log","Login","password","onChange","e","target","onSubmit","preventDefault","required","placeholder","type","Register","setMessage","order","address","CheckoutItem","firstname","lastname","email","phone","street","zipCode","town","country","products","storeOwnerId","handled","setOrder","OrderService","includes","AddressService","width","some","p","checkoutBasket","storeId","checkout","marginTop","Checkout","setTimeout","userId","OrderItem","removeOrder","handleOrder","orderHistory","showOrder","setShowOrder","marginBottom","PersonalInfo","setPersonalInfo","addingPersonalInfo","setAddingPersonalInfo","onChangePerInfo","Products","setProducts","removeProduct","description","setProduct","addingProduct","setAddingProduct","resetForm","ProductService","flexDirection","Address","setAddress","addingAddress","setAddingAddress","changingAddress","setChangingAddress","onChangeAddress","Account","orders","setOrders","setOrderHistory","reverse","InsideStore","match","params","setStore","same","Object","assign","parseInt","addToCart","PrivateRoute","Component","component","rest","render","pathname","state","from","location","UnPrivateRoute","App","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4821283a.chunk.js","sourcesContent":["export default {\r\n  register: (user) => {\r\n    return fetch(\"/users/user/register\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(user),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => data);\r\n  },\r\n  login: (user) => {\r\n    return fetch(\"/users/user/login\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(user),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return {\r\n          isAuthenticated: false,\r\n          user: { _id: null, username: \"\" },\r\n          message: { msgBody: \"Unauthorized\", msgError: true },\r\n        };\r\n      }\r\n    });\r\n  },\r\n  logout: () => {\r\n    return fetch(\"/users/user/logout\")\r\n      .then((res) => res.json())\r\n      .then((data) => data);\r\n  },\r\n  isAuthenticated: () => {\r\n    return fetch(\"/users/user/authenticated\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return {\r\n          isAuthenticated: false,\r\n          user: { _id: null, username: \"\" },\r\n          message: { msgBody: \"Unauthorized\", msgError: true },\r\n        };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { createContext, useState, useEffect } from \"react\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport default ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    AuthService.isAuthenticated().then((data) => {\r\n      setUser(data.user);\r\n      setIsAuthenticated(data.isAuthenticated);\r\n      setIsLoaded(true);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {isLoaded ? (\r\n        <AuthContext.Provider\r\n          value={{ user, setUser, isAuthenticated, setIsAuthenticated }}\r\n        >\r\n          {children}\r\n        </AuthContext.Provider>\r\n      ) : (\r\n        <h1>Loading...</h1>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { createContext, useState, useEffect } from \"react\";\r\n\r\nexport const BasketContext = createContext();\r\n\r\nexport default ({ children }) => {\r\n  const [basket, setBasket] = useState([]);\r\n  const [showBasket, setShowBasket] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let fromStorage = JSON.parse(localStorage.getItem(\"storageBasket\"));\r\n    if (fromStorage) {\r\n      setBasket(fromStorage);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <BasketContext.Provider\r\n        value={{ basket, setBasket, showBasket, setShowBasket }}\r\n      >\r\n        {children}\r\n      </BasketContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\n\r\nconst Basket = () => {\r\n  const basketContext = useContext(BasketContext);\r\n\r\n  const removeFromBasket = (product) => {\r\n    basketContext.setBasket(\r\n      basketContext.basket.filter((item) => item._id !== product._id)\r\n    );\r\n    localStorage.setItem(\r\n      \"storageBasket\",\r\n      JSON.stringify(\r\n        basketContext.basket.filter((item) => item._id !== product._id)\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {basketContext.showBasket && (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"flex-end\",\r\n            justifyContent: \"space-between\",\r\n            borderBottom: \"1px solid black\",\r\n            padding: \"10px 10px 10px 20px\",\r\n          }}\r\n        >\r\n          {basketContext.basket.length > 0 ? (\r\n            <div>\r\n              {basketContext.basket\r\n                //filter function before map to retrieve only the last added item with a specific id (aka the item with the highest count value),\r\n                //slice() before filter as a precaution to not modify state directly\r\n                .slice()\r\n                .filter((v, i, a) => a.findIndex((t) => t._id === v._id) === i)\r\n                .map((product) => (\r\n                  <div\r\n                    key={product.id}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      padding: \"10px\",\r\n                      borderBottom: \"1px solid #e1e1e1\",\r\n                    }}\r\n                  >\r\n                    <p style={{ paddingRight: \"10px\" }}>{`${product.name} ${\r\n                      product.count\r\n                    } st - ${product.price * product.count} kr`}</p>\r\n                    <button onClick={() => removeFromBasket(product)}>\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n          ) : (\r\n            <div style={{ paddingRight: \"19px\" }}>\r\n              <p>No items...</p>\r\n            </div>\r\n          )}\r\n          <div style={{ display: \"flex\" }}>\r\n            <p style={{ paddingRight: \"10px\" }}>\r\n              {`Total: ${basketContext.basket\r\n                .map((product) => product.price)\r\n                .reduce((partialSum, total) => partialSum + total, 0)}`}\r\n            </p>\r\n            <button onClick={() => basketContext.setShowBasket(false)}>\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Basket;\r\n","import React, { useContext } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport Basket from \"./Basket\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nconst Navbar = () => {\r\n  const authContext = useContext(AuthContext);\r\n  const basketContext = useContext(BasketContext);\r\n  const history = useHistory();\r\n\r\n  const linkStyle = () => {\r\n    return { margin: \"10px\" };\r\n  };\r\n\r\n  const logOut = () => {\r\n    AuthService.logout().then((data) => {\r\n      if (data.success) {\r\n        authContext.setUser(data.user);\r\n        authContext.setIsAuthenticated(false);\r\n        history.push(\"/login\");\r\n      }\r\n    });\r\n  };\r\n\r\n  //Navbar to return if authContext.isAuthenticated is true\r\n  const authNavbar = () => {\r\n    return (\r\n      <>\r\n        <div style={{ display: \"flex\" }}>\r\n          <NavLink to=\"/\">\r\n            <p style={linkStyle()}>Loppis</p>\r\n          </NavLink>\r\n          <NavLink to=\"/account\">\r\n            <p style={linkStyle()}>Account</p>\r\n          </NavLink>\r\n        </div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <p style={{ fontWeight: \"bold\" }}>\r\n            Items in cart: <span>{basketContext.basket.length}</span>\r\n          </p>\r\n          {basketContext.showBasket ? (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(false)}\r\n            >\r\n              Hide basket\r\n            </button>\r\n          ) : (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(true)}\r\n            >\r\n              Show basket\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <NavLink to=\"/checkout\">\r\n            <p style={linkStyle()}>Checkout</p>\r\n          </NavLink>\r\n          <button style={linkStyle()} onClick={logOut}>\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  //Navbar to return if authContext.isAuthenticated is false\r\n  const unAuthNavbar = () => {\r\n    return (\r\n      <>\r\n        <div style={{ display: \"flex\" }}>\r\n          <NavLink to=\"/\">\r\n            <p style={linkStyle()}>Loppis</p>\r\n          </NavLink>\r\n          <NavLink to=\"/login\">\r\n            <p style={linkStyle()}>Login</p>\r\n          </NavLink>\r\n          <NavLink to=\"/register\">\r\n            <p style={linkStyle()}>Register</p>\r\n          </NavLink>\r\n        </div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <p style={{ fontWeight: \"bold\" }}>\r\n            Items in cart: <span>{basketContext.basket.length}</span>\r\n          </p>\r\n          {basketContext.showBasket ? (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(false)}\r\n            >\r\n              Hide basket\r\n            </button>\r\n          ) : (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(true)}\r\n            >\r\n              Show basket\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <NavLink to=\"/checkout\">\r\n            <p style={linkStyle()}>Checkout</p>\r\n          </NavLink>\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Basket />\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          borderBottom: \"1px solid black\",\r\n          padding: \"10px 20px 0px 20px\",\r\n        }}\r\n      >\r\n        {authContext.isAuthenticated ? authNavbar() : unAuthNavbar()}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Store = (props) => {\r\n  const history = useHistory();\r\n  const { username, _id } = props.store;\r\n\r\n  const goToStore = (id) => {\r\n    history.push(`/insidestore/${id}`);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginRight: \"10px\",\r\n        border: \"2px solid black\",\r\n        padding: \"0px 20px 20px\",\r\n      }}\r\n    >\r\n      <h1>{`${username}'s store`}</h1>\r\n      <button onClick={() => goToStore(_id)}>To store</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Store;\r\n","export default {\r\n  getUsers: () => {\r\n    return fetch(\"/users/getallusers\").then((res) => {\r\n      return res.json().then((data) => data);\r\n    });\r\n  },\r\n  updateUser: (personalInfo) => {\r\n    return fetch(\"/users/user/updateuser\", {\r\n      method: \"put\",\r\n      body: JSON.stringify(personalInfo),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Stores from \"../staticData/Stores\";\r\nimport Store from \"./Store\";\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst Loppis = () => {\r\n  const [stores, setStores] = useState([]);\r\n\r\n  const getStores = () => {\r\n    UserService.getUsers().then((data) => {\r\n      setStores(data.users);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getStores();\r\n  }, []);\r\n\r\n  console.log(stores);\r\n\r\n  return (\r\n    <>\r\n      <h1>Loppis</h1>\r\n      <div style={{ display: \"flex\" }}>\r\n        {stores.map((store) => (\r\n          <Store key={store._id} store={store} />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Loppis;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nconst Login = () => {\r\n  const authContext = useContext(AuthContext);\r\n  const history = useHistory();\r\n  const [user, setUser] = useState({ username: \"\", password: \"\" });\r\n\r\n  const onChange = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    AuthService.login(user).then((data) => {\r\n      const { isAuthenticated, user } = data;\r\n      if (isAuthenticated) {\r\n        authContext.setUser(user);\r\n        authContext.setIsAuthenticated(isAuthenticated);\r\n        history.push(\"/account\");\r\n      }\r\n    });\r\n  };\r\n\r\n  console.log(authContext.isAuthenticated);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Login</h1>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          name=\"username\"\r\n          value={user.username}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Username\"\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={user.password}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Password\"\r\n        />\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nconst Register = () => {\r\n  const history = useHistory();\r\n\r\n  const [user, setUser] = useState({ username: \"\", password: \"\" });\r\n\r\n  //message state to be used for snackbar notifications later\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const onChange = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    AuthService.register(user).then((data) => {\r\n      const { message } = data;\r\n      setMessage(message);\r\n      if (!message.msgError) {\r\n        history.push(\"/login\");\r\n      }\r\n    });\r\n  };\r\n\r\n  console.log(user);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Register</h1>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          name=\"username\"\r\n          value={user.username}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Username\"\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={user.password}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Password\"\r\n        />\r\n        <button type=\"submit\">Register</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","export default {\r\n  newOrder: (order) => {\r\n    return fetch(\"/users/user/neworder\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  newOrderHistoryItem: (order) => {\r\n    return fetch(\"/users/user/neworderhistoryitem\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unautorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  getOrders: () => {\r\n    return fetch(\"users/user/getorders\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  getOrderHistory: () => {\r\n    return fetch(\"users/user/getorderhistory\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  removeOrder: (order) => {\r\n    return fetch(\"/users/user/removeorder\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  handleOrder: (order) => {\r\n    return fetch(\"/users/user/handleorder\", {\r\n      method: \"put\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","export default {\r\n  newAddress: (address) => {\r\n    return fetch(\"/users/user/newaddress\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(address),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  updateAddress: (address) => {\r\n    return fetch(\"/users/user/updateaddress\", {\r\n      method: \"put\",\r\n      body: JSON.stringify(address),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  getAddress: () => {\r\n    return fetch(\"users/user/getaddress\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport OrderService from \"../services/OrderService\";\r\nimport AddressService from \"../services/AddressService\";\r\n\r\nconst CheckoutItem = (props) => {\r\n  const { store, setMessage } = props;\r\n  const basketContext = useContext(BasketContext);\r\n  const authContext = useContext(AuthContext);\r\n\r\n  const [order, setOrder] = useState({\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    street: \"\",\r\n    zipCode: \"\",\r\n    town: \"\",\r\n    country: \"\",\r\n    products: [],\r\n    storeOwnerId: \"\",\r\n    handled: false,\r\n  });\r\n\r\n  const removeFromBasket = (product) => {\r\n    basketContext.setBasket(\r\n      [...basketContext.basket].filter((p) => p._id !== product._id)\r\n    );\r\n  };\r\n\r\n  const checkout = (basket, store, e) => {\r\n    e.preventDefault();\r\n    const checkoutBasket = basket.filter(\r\n      (v, i, a) => a.findIndex((t) => t._id === v._id) === i\r\n    );\r\n    const storeId = store._id;\r\n    setOrder({ ...order, products: checkoutBasket, storeOwnerId: storeId });\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    setOrder({ ...order, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (order.storeOwnerId !== \"\") {\r\n      OrderService.newOrder(order)\r\n        .then((data) => {\r\n          if (data && data.message) {\r\n            setMessage(data.message);\r\n          }\r\n        })\r\n        .then(() => {\r\n          if (authContext.isAuthenticated) {\r\n            OrderService.newOrderHistoryItem(order).then((data) => {\r\n              if (data && data.message) {\r\n                setMessage(data.message);\r\n              }\r\n            });\r\n          }\r\n        });\r\n      basketContext.setBasket(\r\n        [...basketContext.basket].filter(\r\n          (product) => !order.products.includes(product)\r\n        )\r\n      );\r\n    }\r\n  }, [order.products]);\r\n\r\n  useEffect(() => {\r\n    if (authContext.isAuthenticated) {\r\n      AddressService.getAddress().then((data) => {\r\n        if (data && data.address) {\r\n          setOrder({\r\n            ...order,\r\n            firstname: authContext.user.firstname,\r\n            lastname: authContext.user.lastname,\r\n            email: authContext.user.email,\r\n            phone: authContext.user.phone,\r\n            street: data.address.street,\r\n            zipCode: data.address.zipCode,\r\n            town: data.address.town,\r\n            country: data.address.country,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }, [authContext.isAuthenticated]);\r\n\r\n  return (\r\n    <div style={{ borderBottom: \"2px solid black\", padding: \"20px\" }}>\r\n      <h3>{`${store.username}'s store`}</h3>\r\n      <div style={{ display: \"flex\" }}>\r\n        <div style={{ width: \"50%\", marginRight: \"2%\" }}>\r\n          {basketContext.basket\r\n            .filter((product) => store.products.some((p) => p === product._id))\r\n            .slice()\r\n            .filter((v, i, a) => a.findIndex((t) => t._id === v._id) === i)\r\n            .map((product) => (\r\n              <div\r\n                key={product._id}\r\n                style={{\r\n                  display: \"flex\",\r\n                  padding: \"10px\",\r\n                  borderBottom: \"1px solid #e1e1e1\",\r\n                }}\r\n              >\r\n                <p style={{ paddingRight: \"10px\" }}>{`${product.name} ${\r\n                  product.count\r\n                } - ${product.price * product.count} kr`}</p>\r\n                <button\r\n                  onClick={() => {\r\n                    removeFromBasket(product);\r\n                  }}\r\n                >\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            ))}\r\n        </div>\r\n        <form\r\n          onSubmit={(e) =>\r\n            checkout(\r\n              basketContext.basket.filter((product) =>\r\n                store.products.some((p) => p === product._id)\r\n              ),\r\n              store,\r\n              e\r\n            )\r\n          }\r\n        >\r\n          <h3>Delivery/invoicing address</h3>\r\n          <input\r\n            name=\"firstname\"\r\n            value={order.firstname}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Firstname\"\r\n          />\r\n          <input\r\n            name=\"lastname\"\r\n            value={order.lastname}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Lastname\"\r\n          />\r\n          <input\r\n            name=\"email\"\r\n            value={order.email}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Email\"\r\n          />\r\n          <input\r\n            name=\"phone\"\r\n            value={order.phone}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Phone\"\r\n          />\r\n          <input\r\n            name=\"street\"\r\n            value={order.street}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Street\"\r\n          />\r\n          <input\r\n            name=\"zipCode\"\r\n            value={order.zipCode}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Zipcode\"\r\n          />\r\n          <input\r\n            name=\"town\"\r\n            value={order.town}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Town\"\r\n          />\r\n          <input\r\n            name=\"country\"\r\n            value={order.country}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Country\"\r\n          />\r\n          <p>{`Total: ${basketContext.basket\r\n            .filter((product) => store.products.some((p) => p === product._id))\r\n            .map((product) => product.price)\r\n            .reduce((partialSum, total) => partialSum + total, 0)} kr`}</p>\r\n          <button style={{ marginTop: \"10px\" }} type=\"submit\">\r\n            Checkout\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutItem;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport Stores from \"../staticData/Stores\";\r\nimport UserService from \"../services/UserService\";\r\nimport CheckoutItem from \"./CheckoutItem\";\r\n\r\nconst Checkout = () => {\r\n  const [stores, setStores] = useState([]);\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const basketContext = useContext(BasketContext);\r\n  const history = useHistory();\r\n\r\n  const getStores = () => {\r\n    UserService.getUsers().then((data) => {\r\n      if (data) {\r\n        setStores(data.users);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getStores();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setMessage(null);\r\n    }, 2000);\r\n  }, [message]);\r\n\r\n  return (\r\n    <>\r\n      <h1>Checkout</h1>\r\n      {message !== null && <p>{message.msgBody}</p>}\r\n      {basketContext.basket.length > 0 ? (\r\n        <div>\r\n          {stores.map((store) => {\r\n            if (\r\n              store.products.some((p) =>\r\n                basketContext.basket.some((product) => p === product._id)\r\n              )\r\n            ) {\r\n              return (\r\n                <CheckoutItem\r\n                  key={store._id}\r\n                  store={store}\r\n                  setMessage={setMessage}\r\n                />\r\n              );\r\n            } else {\r\n              return null;\r\n            }\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <p>No items...</p>\r\n          <button onClick={() => history.push(\"/\")}>Back to market</button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","export default {\r\n  getProducts: (userId) => {\r\n    return fetch(\"/users/user/getproducts\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(userId),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      return res.json().then((data) => data);\r\n    });\r\n  },\r\n  getMyProducts: () => {\r\n    return fetch(\"/users/user/getmyproducts\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  newProduct: (product) => {\r\n    return fetch(\"users/user/newproduct\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(product),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  removeProduct: (product) => {\r\n    return fetch(\"/users/user/removeproduct\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(product),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { useState } from \"react\";\r\n\r\nconst OrderItem = (props) => {\r\n  const { order, removeOrder, handleOrder, orderHistory = false } = props;\r\n  const [showOrder, setShowOrder] = useState(false);\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          marginBottom: \"10px\",\r\n          borderBottom: \"1px solid #e1e1e1\",\r\n          padding: \"5px\",\r\n        }}\r\n      >\r\n        {!orderHistory && (\r\n          <p\r\n            style={{ marginRight: \"5px\" }}\r\n          >{`${order.firstname} ${order.lastname} | ${order.email}`}</p>\r\n        )}\r\n        {orderHistory && (\r\n          <p style={{ marginRight: \"5px\" }}>{`# ${order._id}`}</p>\r\n        )}\r\n        {!showOrder && (\r\n          <button onClick={() => setShowOrder(true)}>Show info</button>\r\n        )}\r\n        {showOrder && (\r\n          <button onClick={() => setShowOrder(false)}>Hide info</button>\r\n        )}\r\n        {!orderHistory && (\r\n          <button onClick={() => removeOrder(order)}>Remove</button>\r\n        )}\r\n        {!order.handled && !orderHistory && (\r\n          <button onClick={() => handleOrder(order)}>Handle</button>\r\n        )}\r\n        {order.handled && <p>Handled</p>}\r\n      </div>\r\n      {showOrder && (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            borderBottom: \"1px solid #e1e1e1\",\r\n            padding: \"0px\",\r\n          }}\r\n        >\r\n          {!orderHistory && (\r\n            <>\r\n              <div style={{ padding: \"0px 10px\" }}>\r\n                <p>{`Order number: ${order._id}`}</p>\r\n                <p>{`Name: ${order.firstname} ${order.lastname}`}</p>\r\n                <p>{`Phone: ${order.phone}`}</p>\r\n                <p>{`Email: ${order.email}`}</p>\r\n              </div>\r\n              <div style={{ padding: \"0px 10px\" }}>\r\n                <p style={{ fontWeight: \"bold\" }}>Adress</p>\r\n                <p>{`${order.street}`}</p>\r\n                <p>{`${order.zipCode}, ${order.town}`}</p>\r\n                <p>{`${order.country}`}</p>\r\n              </div>\r\n              <div style={{ padding: \"0px 10px\" }}>\r\n                <p style={{ fontWeight: \"bold\" }}>Products</p>\r\n                {order.products.map((product) => (\r\n                  <div key={product._id}>\r\n                    <p>{product.name}</p>\r\n                    <ul>\r\n                      <li>{`ID: ${product._id}`}</li>\r\n                      <li>{`Qty: ${product.count}`}</li>\r\n                      <li>{`Price: ${product.price}`}</li>\r\n                    </ul>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n          {orderHistory && (\r\n            <div style={{ padding: \"0px 10px\" }}>\r\n              <p>{`Order number: ${order._id}`}</p>\r\n              <p style={{ fontWeight: \"bold\" }}>Products</p>\r\n              {order.products.map((product) => (\r\n                <div key={product._id}>\r\n                  <p>{product.name}</p>\r\n                  <ul>\r\n                    <li>{`ID: ${product._id}`}</li>\r\n                    <li>{`Qty: ${product.count}`}</li>\r\n                    <li>{`Price: ${product.price}`}</li>\r\n                  </ul>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst PersonalInfo = (props) => {\r\n  const { authContext, setMessage } = props;\r\n\r\n  const [personalInfo, setPersonalInfo] = useState({\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [addingPersonalInfo, setAddingPersonalInfo] = useState(false);\r\n\r\n  const onChangePerInfo = (e) => {\r\n    setPersonalInfo({ ...personalInfo, [e.target.name]: e.target.value });\r\n  };\r\n  const addPersonalInfo = (e) => {\r\n    e.preventDefault();\r\n    UserService.updateUser(personalInfo).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        authContext.setUser({\r\n          ...authContext.user,\r\n          firstname: personalInfo.firstname,\r\n          lastname: personalInfo.lastname,\r\n          email: personalInfo.email,\r\n          phone: personalInfo.phone,\r\n        });\r\n        setMessage(message);\r\n        setAddingPersonalInfo(false);\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (addingPersonalInfo) {\r\n      setPersonalInfo({\r\n        ...personalInfo,\r\n        firstname: authContext.user.firstname,\r\n        lastname: authContext.user.lastname,\r\n        email: authContext.user.email,\r\n        phone: authContext.user.phone,\r\n      });\r\n    }\r\n  }, [addingPersonalInfo]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        margin: \"10px 0px\",\r\n        padding: \"10px 0px\",\r\n        borderBottom: \"1px solid #e1e1e1\",\r\n      }}\r\n    >\r\n      <p\r\n        style={{ margin: \"0px 5px 0px 0px\" }}\r\n      >{`Welcome ${authContext.user.username}`}</p>\r\n      {!addingPersonalInfo && (\r\n        <div style={{ display: \"flex\" }}>\r\n          <button onClick={() => setAddingPersonalInfo(true)}>\r\n            Add/change personal info\r\n          </button>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>\r\n            {authContext.user.firstname}\r\n          </p>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>\r\n            {authContext.user.lastname}\r\n          </p>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>{authContext.user.email}</p>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>{authContext.user.phone}</p>\r\n        </div>\r\n      )}\r\n      {addingPersonalInfo && (\r\n        <form style={{ display: \"flex\" }} onSubmit={addPersonalInfo}>\r\n          <input\r\n            name=\"firstname\"\r\n            value={personalInfo.firstname}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Firstname\"\r\n          />\r\n          <input\r\n            name=\"lastname\"\r\n            value={personalInfo.lastname}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Lastname\"\r\n          />\r\n          <input\r\n            name=\"email\"\r\n            value={personalInfo.email}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Email\"\r\n          />\r\n          <input\r\n            name=\"phone\"\r\n            value={personalInfo.phone}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Phone\"\r\n          />\r\n          <button type=\"submit\">Add</button>\r\n          <button onClick={() => setAddingPersonalInfo(false)}>Cancel</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonalInfo;\r\n","import React, { useState } from \"react\";\r\nimport ProductService from \"../services/ProductService\";\r\n\r\nconst Products = (props) => {\r\n  const {\r\n    authContext,\r\n    setMessage,\r\n    products,\r\n    setProducts,\r\n    removeProduct,\r\n  } = props;\r\n\r\n  const [product, setProduct] = useState({\r\n    id: null,\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n  });\r\n\r\n  const [addingProduct, setAddingProduct] = useState(false);\r\n\r\n  const onChange = (e) => {\r\n    setProduct({ ...product, [e.target.name]: e.target.value });\r\n  };\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    ProductService.newProduct(product).then((data) => {\r\n      const { message } = data;\r\n      resetForm();\r\n      if (!message.msgError) {\r\n        ProductService.getMyProducts().then((data) => {\r\n          if (data) {\r\n            setProducts(data.products);\r\n            setMessage(message);\r\n          }\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n  const resetForm = () => {\r\n    setProduct({ name: \"\", description: \"\", price: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p style={{ fontWeight: \"bold\" }}>Products</p>\r\n      {!addingProduct && (\r\n        <button onClick={() => setAddingProduct(true)}>Add product</button>\r\n      )}\r\n      {addingProduct && (\r\n        <form\r\n          onSubmit={onSubmit}\r\n          style={{ display: \"flex\", flexDirection: \"column\" }}\r\n        >\r\n          <input\r\n            name=\"name\"\r\n            value={product.name}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Name\"\r\n          />\r\n          <input\r\n            name=\"description\"\r\n            value={product.description}\r\n            onChange={onChange}\r\n            placeholder=\"Description\"\r\n          />\r\n          <input\r\n            name=\"price\"\r\n            value={product.price}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Price\"\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button onClick={() => setAddingProduct(false)}>Close</button>\r\n        </form>\r\n      )}\r\n      <div>\r\n        {products.map((product) => (\r\n          <div\r\n            key={product._id}\r\n            style={{\r\n              padding: \"10px 0px\",\r\n              borderBottom: \"1px solid #e1e1e1\",\r\n            }}\r\n          >\r\n            <p style={{ fontWeight: \"bold\" }}>{product.name}</p>\r\n            <p>{`${product.price} kr`}</p>\r\n            <p>{product.description}</p>\r\n            <button onClick={() => removeProduct(product)}>Remove</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AddressService from \"../services/AddressService\";\r\n\r\nconst Address = (props) => {\r\n  const { authContext, setMessage } = props;\r\n\r\n  const [address, setAddress] = useState({\r\n    id: null,\r\n    street: \"\",\r\n    zipCode: \"\",\r\n    town: \"\",\r\n    country: \"\",\r\n  });\r\n  const [addingAddress, setAddingAddress] = useState(false);\r\n  const [changingAddress, setChangingAddress] = useState(false);\r\n\r\n  const onChangeAddress = (e) => {\r\n    setAddress({ ...address, [e.target.name]: e.target.value });\r\n  };\r\n  const addAddress = (e) => {\r\n    e.preventDefault();\r\n    AddressService.newAddress(address).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        AddressService.getAddress().then((data) => {\r\n          setAddingAddress(false);\r\n          setAddress(data.address);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const changeAddress = (e) => {\r\n    e.preventDefault();\r\n    AddressService.updateAddress(address).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        AddressService.getAddress().then((data) => {\r\n          setChangingAddress(false);\r\n          setAddress(data.address);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (authContext.user.username !== \"\") {\r\n      AddressService.getAddress().then((data) => {\r\n        if (data && data.address) {\r\n          setAddress(data.address);\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <p style={{ fontWeight: \"bold\" }}>Address</p>\r\n      {!addingAddress &&\r\n        address.street === \"\" &&\r\n        address.zipCode === \"\" &&\r\n        address.town === \"\" &&\r\n        address.country === \"\" && (\r\n          <button onClick={() => setAddingAddress(true)}>Add address</button>\r\n        )}\r\n      {!changingAddress &&\r\n        (address.street !== \"\" ||\r\n          address.zipCode !== \"\" ||\r\n          address.town !== \"\" ||\r\n          address.country !== \"\") && (\r\n          <button onClick={() => setChangingAddress(true)}>\r\n            Change address\r\n          </button>\r\n        )}\r\n      {addingAddress && (\r\n        <form\r\n          onSubmit={addAddress}\r\n          style={{ display: \"flex\", flexDirection: \"column\" }}\r\n        >\r\n          <input\r\n            name=\"street\"\r\n            value={address.street}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Street\"\r\n          />\r\n          <input\r\n            name=\"zipCode\"\r\n            value={address.zipCode}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Zipcode\"\r\n          />\r\n          <input\r\n            name=\"town\"\r\n            value={address.town}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Town\"\r\n          />\r\n          <input\r\n            name=\"country\"\r\n            value={address.country}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"country\"\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button onClick={() => setAddingAddress(false)}>Close</button>\r\n        </form>\r\n      )}\r\n      {changingAddress && (\r\n        <form\r\n          onSubmit={changeAddress}\r\n          style={{ display: \"flex\", flexDirection: \"column\" }}\r\n        >\r\n          <input\r\n            name=\"street\"\r\n            value={address.street}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Street\"\r\n          />\r\n          <input\r\n            name=\"zipCode\"\r\n            value={address.zipCode}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Zipcode\"\r\n          />\r\n          <input\r\n            name=\"town\"\r\n            value={address.town}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Town\"\r\n          />\r\n          <input\r\n            name=\"country\"\r\n            value={address.country}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"country\"\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button onClick={() => setChangingAddress(false)}>Close</button>\r\n        </form>\r\n      )}\r\n      <p>{address.street}</p>\r\n      <p>{address.zipCode}</p>\r\n      <p>{address.town}</p>\r\n      <p>{address.country}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Address;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport ProductService from \"../services/ProductService\";\r\nimport OrderService from \"../services/OrderService\";\r\nimport UserService from \"../services/UserService\";\r\nimport OrderItem from \"./OrderItem\";\r\nimport AddressService from \"../services/AddressService\";\r\nimport PersonalInfo from \"./PersonalInfo\";\r\nimport Products from \"./Products\";\r\nimport Address from \"./Address\";\r\n\r\nconst Account = () => {\r\n  const authContext = useContext(AuthContext);\r\n\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  const [orderHistory, setOrderHistory] = useState([]);\r\n\r\n  //message state to be used for snackbar notifications later\r\n  const [message, setMessage] = useState(null);\r\n\r\n  //Product handlers\r\n  const removeProduct = (product) => {\r\n    ProductService.removeProduct(product).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        ProductService.getMyProducts().then((data) => {\r\n          setProducts(data.products);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  //order handlers\r\n  const removeOrder = (order) => {\r\n    OrderService.removeOrder(order).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        OrderService.getOrders().then((data) => {\r\n          setOrders(data.orders);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleOrder = (order) => {\r\n    OrderService.handleOrder(order).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        OrderService.getOrders().then((data) => {\r\n          setOrders(data.orders);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (authContext.user.username !== \"\") {\r\n      ProductService.getMyProducts().then((data) => {\r\n        if (data && data.products) {\r\n          setProducts(data.products);\r\n        }\r\n      });\r\n      OrderService.getOrders().then((data) => {\r\n        if (data && data.orders) {\r\n          setOrders(data.orders);\r\n        }\r\n      });\r\n      OrderService.getOrderHistory().then((data) => {\r\n        setOrderHistory(data.orderHistory);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>Account</h1>\r\n      <PersonalInfo authContext={authContext} setMessage={setMessage} />\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          margin: \"10px 0px\",\r\n          justifyContent: \"space-between\",\r\n        }}\r\n      >\r\n        <Products\r\n          authContext={authContext}\r\n          setMessage={setMessage}\r\n          products={products}\r\n          setProducts={setProducts}\r\n          removeProduct={removeProduct}\r\n        />\r\n        <div>\r\n          <p style={{ fontWeight: \"bold\" }}>\r\n            Incoming orders (\r\n            {orders.filter((order) => order.handled === false).length})\r\n          </p>\r\n          {orders\r\n            .slice()\r\n            .reverse()\r\n            .map((order) => (\r\n              <OrderItem\r\n                key={order._id}\r\n                order={order}\r\n                removeOrder={removeOrder}\r\n                handleOrder={handleOrder}\r\n              />\r\n            ))}\r\n        </div>\r\n        <Address authContext={authContext} setMessage={setMessage} />\r\n      </div>\r\n      <div style={{ padding: \"20px 20px 0px 0px\", width: \"33%\" }}>\r\n        <p style={{ fontWeight: \"bold\", marginTop: \"0px\" }}>Order history</p>\r\n        {orderHistory.map((order) => (\r\n          <OrderItem\r\n            order={order}\r\n            key={order._id}\r\n            removeOrder={removeOrder}\r\n            orderHistory={true}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Stores from \"../staticData/Stores\";\r\nimport Products from \"../staticData/Products\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport ProductService from \"../services/ProductService\";\r\n\r\nconst InsideStore = (props) => {\r\n  const basketContext = useContext(BasketContext);\r\n\r\n  const { id } = props.match.params;\r\n\r\n  //const [storesData, setStoresData] = useState(Stores.getStores());\r\n  //const [productsData, setProductsData] = useState(Products.getProducts());\r\n  //const [storeProductsIds, setStoreProductsIds] = useState([]);\r\n  const [store, setStore] = useState(\"\");\r\n  const [products, setProducts] = useState([]);\r\n\r\n  //Sets the store state to the item in the Stores.getStores()-array to the item that has an id that matches the id from the url param\r\n  /*useEffect(() => {\r\n    setStore(storesData.find((store) => store.id.toString() === id));\r\n  }, []);\r\n\r\n  //Creates an array of ids retieved from the stores (store state) products array\r\n  useEffect(() => {\r\n    setStoreProductsIds(store.products);\r\n  }, [store]);\r\n\r\n  //Sets the products state to an array of products which ids mathes the ids from the storeProductIds (storeProductIds state) array\r\n  useEffect(() => {\r\n    if (storeProductsIds)\r\n      setProducts(\r\n        productsData.filter((product) =>\r\n          storeProductsIds.some((id) => id === product.id)\r\n        )\r\n      );\r\n  }, [storeProductsIds]);*/\r\n\r\n  useEffect(() => {\r\n    ProductService.getProducts({ _id: id }).then((data) => {\r\n      if (data) {\r\n        setProducts(data.products);\r\n        setStore(data.username);\r\n      }\r\n    });\r\n  }, [id]);\r\n\r\n  //Adds a product object to the cart and assigns it a counter property\r\n  const addToCart = (product) => {\r\n    const same = basketContext.basket.filter((item) => item === product);\r\n    Object.assign(product, {\r\n      count: same.length + 1,\r\n      price: parseInt(product.price),\r\n    });\r\n    basketContext.setBasket([...basketContext.basket, product]);\r\n    localStorage.setItem(\r\n      \"storageBasket\",\r\n      JSON.stringify([...basketContext.basket, product])\r\n    );\r\n  };\r\n\r\n  console.log(basketContext.basket);\r\n\r\n  return (\r\n    <div>\r\n      <h1>{`${store}'s store`}</h1>\r\n      <h3>Products</h3>\r\n      <div>\r\n        {products.map((product) => (\r\n          <div key={product._id}>\r\n            <p>{`${product.name} - ${product.price} kr`}</p>\r\n            <button onClick={() => addToCart(product)}>Add to cart</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InsideStore;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const authContext = useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (!authContext.isAuthenticated) {\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: \"/login\", state: { from: props.location } }}\r\n            />\r\n          );\r\n        }\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nconst UnPrivateRoute = ({ component: Component, ...rest }) => {\r\n  const authContext = useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (authContext.isAuthenticated) {\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: \"/account\", state: { from: props.location } }}\r\n            />\r\n          );\r\n        }\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default UnPrivateRoute;\r\n","import React, { useContext } from \"react\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport { BasketContext } from \"./context/BasketContext\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport Loppis from \"./components/Loppis\";\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport Checkout from \"./components/Checkout\";\nimport Account from \"./components/Account\";\nimport InsideStore from \"./components/InsideStore\";\nimport PrivateRoute from \"./hocs/PrivateRoute\";\nimport UnPrivateRoute from \"./hocs/UnPrivateRoute\";\n\nfunction App() {\n  const authContext = useContext(AuthContext);\n  const basketContext = useContext(BasketContext);\n\n  console.log(authContext.isAuthenticated);\n  console.log(basketContext);\n\n  return (\n    <Router>\n      <Navbar />\n      <Route exact path=\"/\" component={Loppis} />\n      <PrivateRoute path=\"/account\" component={Account} />\n      <UnPrivateRoute path=\"/login\" component={Login} />\n      <UnPrivateRoute path=\"/register\" component={Register} />\n      <Route path=\"/checkout\" component={Checkout} />\n      <Route path=\"/insidestore/:id\" component={InsideStore} />\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport AuthProvider from \"./context/AuthContext\";\nimport BasketProvider from \"./context/BasketContext\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthProvider>\n      <BasketProvider>\n        <App />\n      </BasketProvider>\n    </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}