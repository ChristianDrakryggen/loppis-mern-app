{"version":3,"sources":["services/AuthService.js","context/AuthContext.js","context/BasketContext.js","components/Basket.js","components/Navbar.js","components/Store.js","services/UserService.js","components/Loppis.js","components/Login.js","components/Register.js","services/OrderService.js","services/AddressService.js","components/CheckoutItem.js","components/Checkout.js","services/ProductService.js","components/OrderItem.js","components/PersonalInfo.js","components/Products.js","components/Address.js","components/Account.js","components/InsideStore.js","hocs/PrivateRoute.js","hocs/UnPrivateRoute.js","App.js","index.js"],"names":["user","fetch","method","body","JSON","stringify","headers","then","res","json","data","status","isAuthenticated","_id","username","message","msgBody","msgError","AuthContext","createContext","children","useState","setUser","setIsAuthenticated","isLoaded","setIsLoaded","useEffect","AuthService","Provider","value","BasketContext","basket","setBasket","showBasket","setShowBasket","Basket","basketContext","useContext","style","display","alignItems","justifyContent","borderBottom","padding","length","slice","filter","v","i","a","findIndex","t","map","product","paddingRight","name","count","price","onClick","item","removeFromBasket","id","reduce","partialSum","total","Navbar","authContext","history","useHistory","logOut","success","push","to","margin","fontWeight","Store","props","store","marginRight","border","personalInfo","Loppis","stores","setStores","UserService","users","console","log","Login","password","onChange","e","target","onSubmit","preventDefault","required","placeholder","type","Register","setMessage","order","address","CheckoutItem","firstname","lastname","email","phone","street","zipCode","town","country","products","storeOwnerId","handled","setOrder","OrderService","includes","AddressService","width","some","p","checkoutBasket","storeId","checkout","marginTop","Checkout","setTimeout","userId","OrderItem","removeOrder","handleOrder","orderHistory","showOrder","setShowOrder","marginBottom","PersonalInfo","setPersonalInfo","addingPersonalInfo","setAddingPersonalInfo","onChangePerInfo","Products","setProducts","removeProduct","description","setProduct","addingProduct","setAddingProduct","resetForm","ProductService","flexDirection","Address","setAddress","addingAddress","setAddingAddress","changingAddress","setChangingAddress","onChangeAddress","Account","orders","setOrders","setOrderHistory","reverse","InsideStore","match","params","setStore","same","Object","assign","parseInt","addToCart","PrivateRoute","Component","component","rest","render","pathname","state","from","location","UnPrivateRoute","App","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e5b7bfe7.chunk.js","sourcesContent":["export default {\r\n  register: (user) => {\r\n    return fetch(\"/users/user/register\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(user),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => data);\r\n  },\r\n  login: (user) => {\r\n    return fetch(\"/users/user/login\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(user),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return {\r\n          isAuthenticated: false,\r\n          user: { _id: null, username: \"\" },\r\n          message: { msgBody: \"Unauthorized\", msgError: true },\r\n        };\r\n      }\r\n    });\r\n  },\r\n  logout: () => {\r\n    return fetch(\"/users/user/logout\")\r\n      .then((res) => res.json())\r\n      .then((data) => data);\r\n  },\r\n  isAuthenticated: () => {\r\n    return fetch(\"/users/user/authenticated\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return {\r\n          isAuthenticated: false,\r\n          user: { _id: null, username: \"\" },\r\n          message: { msgBody: \"Unauthorized\", msgError: true },\r\n        };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { createContext, useState, useEffect } from \"react\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport default ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    AuthService.isAuthenticated().then((data) => {\r\n      setUser(data.user);\r\n      setIsAuthenticated(data.isAuthenticated);\r\n      setIsLoaded(true);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {isLoaded ? (\r\n        <AuthContext.Provider\r\n          value={{ user, setUser, isAuthenticated, setIsAuthenticated }}\r\n        >\r\n          {children}\r\n        </AuthContext.Provider>\r\n      ) : (\r\n        <h1>Loading...</h1>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const BasketContext = createContext();\r\n\r\nexport default ({ children }) => {\r\n  const [basket, setBasket] = useState([]);\r\n  const [showBasket, setShowBasket] = useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <BasketContext.Provider\r\n        value={{ basket, setBasket, showBasket, setShowBasket }}\r\n      >\r\n        {children}\r\n      </BasketContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\n\r\nconst Basket = () => {\r\n  const basketContext = useContext(BasketContext);\r\n\r\n  const removeFromBasket = (product) => {\r\n    basketContext.setBasket(\r\n      basketContext.basket.filter((item) => item._id !== product._id)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {basketContext.showBasket && (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"flex-end\",\r\n            justifyContent: \"space-between\",\r\n            borderBottom: \"1px solid black\",\r\n            padding: \"10px 10px 10px 20px\",\r\n          }}\r\n        >\r\n          {basketContext.basket.length > 0 ? (\r\n            <div>\r\n              {basketContext.basket\r\n                //filter function before map to retrieve only the last added item with a specific id (aka the item with the highest count value),\r\n                //slice() before filter as a precaution to not modify state directly\r\n                .slice()\r\n                .filter((v, i, a) => a.findIndex((t) => t._id === v._id) === i)\r\n                .map((product) => (\r\n                  <div\r\n                    key={product.id}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      padding: \"10px\",\r\n                      borderBottom: \"1px solid #e1e1e1\",\r\n                    }}\r\n                  >\r\n                    <p style={{ paddingRight: \"10px\" }}>{`${product.name} ${\r\n                      product.count\r\n                    } st - ${product.price * product.count} kr`}</p>\r\n                    <button onClick={() => removeFromBasket(product)}>\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n          ) : (\r\n            <div style={{ paddingRight: \"19px\" }}>\r\n              <p>No items...</p>\r\n            </div>\r\n          )}\r\n          <div style={{ display: \"flex\" }}>\r\n            <p style={{ paddingRight: \"10px\" }}>\r\n              {`Total: ${basketContext.basket\r\n                .map((product) => product.price)\r\n                .reduce((partialSum, total) => partialSum + total, 0)}`}\r\n            </p>\r\n            <button onClick={() => basketContext.setShowBasket(false)}>\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Basket;\r\n","import React, { useContext } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport Basket from \"./Basket\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nconst Navbar = () => {\r\n  const authContext = useContext(AuthContext);\r\n  const basketContext = useContext(BasketContext);\r\n  const history = useHistory();\r\n\r\n  const linkStyle = () => {\r\n    return { margin: \"10px\" };\r\n  };\r\n\r\n  const logOut = () => {\r\n    AuthService.logout().then((data) => {\r\n      if (data.success) {\r\n        authContext.setUser(data.user);\r\n        authContext.setIsAuthenticated(false);\r\n        history.push(\"/login\");\r\n      }\r\n    });\r\n  };\r\n\r\n  //Navbar to return if authContext.isAuthenticated is true\r\n  const authNavbar = () => {\r\n    return (\r\n      <>\r\n        <div style={{ display: \"flex\" }}>\r\n          <NavLink to=\"/\">\r\n            <p style={linkStyle()}>Loppis</p>\r\n          </NavLink>\r\n          <NavLink to=\"/account\">\r\n            <p style={linkStyle()}>Account</p>\r\n          </NavLink>\r\n        </div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <p style={{ fontWeight: \"bold\" }}>\r\n            Items in cart: <span>{basketContext.basket.length}</span>\r\n          </p>\r\n          {basketContext.showBasket ? (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(false)}\r\n            >\r\n              Hide basket\r\n            </button>\r\n          ) : (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(true)}\r\n            >\r\n              Show basket\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <NavLink to=\"/checkout\">\r\n            <p style={linkStyle()}>Checkout</p>\r\n          </NavLink>\r\n          <button style={linkStyle()} onClick={logOut}>\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  //Navbar to return if authContext.isAuthenticated is false\r\n  const unAuthNavbar = () => {\r\n    return (\r\n      <>\r\n        <div style={{ display: \"flex\" }}>\r\n          <NavLink to=\"/\">\r\n            <p style={linkStyle()}>Loppis</p>\r\n          </NavLink>\r\n          <NavLink to=\"/login\">\r\n            <p style={linkStyle()}>Login</p>\r\n          </NavLink>\r\n          <NavLink to=\"/register\">\r\n            <p style={linkStyle()}>Register</p>\r\n          </NavLink>\r\n        </div>\r\n        <div style={{ display: \"flex\" }}>\r\n          <p style={{ fontWeight: \"bold\" }}>\r\n            Items in cart: <span>{basketContext.basket.length}</span>\r\n          </p>\r\n          {basketContext.showBasket ? (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(false)}\r\n            >\r\n              Hide basket\r\n            </button>\r\n          ) : (\r\n            <button\r\n              style={linkStyle()}\r\n              onClick={() => basketContext.setShowBasket(true)}\r\n            >\r\n              Show basket\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <NavLink to=\"/checkout\">\r\n            <p style={linkStyle()}>Checkout</p>\r\n          </NavLink>\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Basket />\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          borderBottom: \"1px solid black\",\r\n          padding: \"10px 20px 0px 20px\",\r\n        }}\r\n      >\r\n        {authContext.isAuthenticated ? authNavbar() : unAuthNavbar()}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Store = (props) => {\r\n  const history = useHistory();\r\n  const { username, _id } = props.store;\r\n\r\n  const goToStore = (id) => {\r\n    history.push(`/insidestore/${id}`);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginRight: \"10px\",\r\n        border: \"2px solid black\",\r\n        padding: \"0px 20px 20px\",\r\n      }}\r\n    >\r\n      <h1>{username}</h1>\r\n      <button onClick={() => goToStore(_id)}>To store</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Store;\r\n","export default {\r\n  getUsers: () => {\r\n    return fetch(\"/users/getallusers\").then((res) => {\r\n      return res.json().then((data) => data);\r\n    });\r\n  },\r\n  updateUser: (personalInfo) => {\r\n    return fetch(\"/users/user/updateuser\", {\r\n      method: \"put\",\r\n      body: JSON.stringify(personalInfo),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Stores from \"../staticData/Stores\";\r\nimport Store from \"./Store\";\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst Loppis = () => {\r\n  const [stores, setStores] = useState([]);\r\n\r\n  const getStores = () => {\r\n    UserService.getUsers().then((data) => {\r\n      setStores(data.users);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getStores();\r\n  }, []);\r\n\r\n  console.log(stores);\r\n\r\n  return (\r\n    <>\r\n      <h1>Loppis</h1>\r\n      <div style={{ display: \"flex\" }}>\r\n        {stores.map((store) => (\r\n          <Store key={store._id} store={store} />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Loppis;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nconst Login = () => {\r\n  const authContext = useContext(AuthContext);\r\n  const history = useHistory();\r\n  const [user, setUser] = useState({ username: \"\", password: \"\" });\r\n\r\n  const onChange = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    AuthService.login(user).then((data) => {\r\n      const { isAuthenticated, user } = data;\r\n      if (isAuthenticated) {\r\n        authContext.setUser(user);\r\n        authContext.setIsAuthenticated(isAuthenticated);\r\n        history.push(\"/account\");\r\n      }\r\n    });\r\n  };\r\n\r\n  console.log(authContext.isAuthenticated);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Login</h1>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          name=\"username\"\r\n          value={user.username}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Username\"\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={user.password}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Password\"\r\n        />\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthService from \"../services/AuthService\";\r\n\r\nconst Register = () => {\r\n  const history = useHistory();\r\n\r\n  const [user, setUser] = useState({ username: \"\", password: \"\" });\r\n\r\n  //message state to be used for snackbar notifications later\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const onChange = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    AuthService.register(user).then((data) => {\r\n      const { message } = data;\r\n      setMessage(message);\r\n      if (!message.msgError) {\r\n        history.push(\"/login\");\r\n      }\r\n    });\r\n  };\r\n\r\n  console.log(user);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Register</h1>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          name=\"username\"\r\n          value={user.username}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Username\"\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={user.password}\r\n          onChange={onChange}\r\n          required\r\n          placeholder=\"Password\"\r\n        />\r\n        <button type=\"submit\">Register</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","export default {\r\n  newOrder: (order) => {\r\n    return fetch(\"/users/user/neworder\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  newOrderHistoryItem: (order) => {\r\n    return fetch(\"/users/user/neworderhistoryitem\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unautorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  getOrders: () => {\r\n    return fetch(\"users/user/getorders\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  getOrderHistory: () => {\r\n    return fetch(\"users/user/getorderhistory\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  removeOrder: (order) => {\r\n    return fetch(\"/users/user/removeorder\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  handleOrder: (order) => {\r\n    return fetch(\"/users/user/handleorder\", {\r\n      method: \"put\",\r\n      body: JSON.stringify(order),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","export default {\r\n  newAddress: (address) => {\r\n    return fetch(\"/users/user/newaddress\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(address),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  updateAddress: (address) => {\r\n    return fetch(\"/users/user/updateaddress\", {\r\n      method: \"put\",\r\n      body: JSON.stringify(address),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  getAddress: () => {\r\n    return fetch(\"users/user/getaddress\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport OrderService from \"../services/OrderService\";\r\nimport AddressService from \"../services/AddressService\";\r\n\r\nconst CheckoutItem = (props) => {\r\n  const { store, setMessage } = props;\r\n  const basketContext = useContext(BasketContext);\r\n  const authContext = useContext(AuthContext);\r\n\r\n  const [order, setOrder] = useState({\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    street: \"\",\r\n    zipCode: \"\",\r\n    town: \"\",\r\n    country: \"\",\r\n    products: [],\r\n    storeOwnerId: \"\",\r\n    handled: false,\r\n  });\r\n\r\n  const removeFromBasket = (product) => {\r\n    basketContext.setBasket(\r\n      [...basketContext.basket].filter((p) => p._id !== product._id)\r\n    );\r\n  };\r\n\r\n  const checkout = (basket, store, e) => {\r\n    e.preventDefault();\r\n    const checkoutBasket = basket.filter(\r\n      (v, i, a) => a.findIndex((t) => t._id === v._id) === i\r\n    );\r\n    const storeId = store._id;\r\n    setOrder({ ...order, products: checkoutBasket, storeOwnerId: storeId });\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    setOrder({ ...order, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (order.storeOwnerId !== \"\") {\r\n      OrderService.newOrder(order)\r\n        .then((data) => {\r\n          if (data && data.message) {\r\n            setMessage(data.message);\r\n          }\r\n        })\r\n        .then(() => {\r\n          OrderService.newOrderHistoryItem(order).then((data) => {\r\n            if (data && data.message) {\r\n              setMessage(\r\n                data.status === 401\r\n                  ? { msgBody: \"Check your email\" }\r\n                  : { msgBody: `${data.message.msgBody}, Check your email` }\r\n              );\r\n            }\r\n          });\r\n        });\r\n      basketContext.setBasket(\r\n        [...basketContext.basket].filter(\r\n          (product) => !order.products.includes(product)\r\n        )\r\n      );\r\n    }\r\n  }, [order.products]);\r\n\r\n  useEffect(() => {\r\n    if (authContext.isAuthenticated) {\r\n      AddressService.getAddress().then((data) => {\r\n        if (data && data.address) {\r\n          setOrder({\r\n            ...order,\r\n            firstname: authContext.user.firstname,\r\n            lastname: authContext.user.lastname,\r\n            email: authContext.user.email,\r\n            phone: authContext.user.phone,\r\n            street: data.address.street,\r\n            zipCode: data.address.zipCode,\r\n            town: data.address.town,\r\n            country: data.address.country,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }, [authContext.isAuthenticated]);\r\n\r\n  return (\r\n    <div style={{ borderBottom: \"2px solid black\", padding: \"20px\" }}>\r\n      <h3>{store.username}</h3>\r\n      <div style={{ display: \"flex\" }}>\r\n        <div style={{ width: \"50%\", marginRight: \"2%\" }}>\r\n          {basketContext.basket\r\n            .filter((product) => store.products.some((p) => p === product._id))\r\n            .slice()\r\n            .filter((v, i, a) => a.findIndex((t) => t._id === v._id) === i)\r\n            .map((product) => (\r\n              <div\r\n                key={product._id}\r\n                style={{\r\n                  display: \"flex\",\r\n                  padding: \"10px\",\r\n                  borderBottom: \"1px solid #e1e1e1\",\r\n                }}\r\n              >\r\n                <p style={{ paddingRight: \"10px\" }}>{`${product.name} ${\r\n                  product.count\r\n                } - ${product.price * product.count} kr`}</p>\r\n                <button\r\n                  onClick={() => {\r\n                    removeFromBasket(product);\r\n                  }}\r\n                >\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            ))}\r\n        </div>\r\n        <form\r\n          onSubmit={(e) =>\r\n            checkout(\r\n              basketContext.basket.filter((product) =>\r\n                store.products.some((p) => p === product._id)\r\n              ),\r\n              store,\r\n              e\r\n            )\r\n          }\r\n        >\r\n          <h3>Delivery/invoicing address</h3>\r\n          <input\r\n            name=\"firstname\"\r\n            value={order.firstname}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Firstname\"\r\n          />\r\n          <input\r\n            name=\"lastname\"\r\n            value={order.lastname}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Lastname\"\r\n          />\r\n          <input\r\n            name=\"email\"\r\n            value={order.email}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Email\"\r\n          />\r\n          <input\r\n            name=\"phone\"\r\n            value={order.phone}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Phone\"\r\n          />\r\n          <input\r\n            name=\"street\"\r\n            value={order.street}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Street\"\r\n          />\r\n          <input\r\n            name=\"zipCode\"\r\n            value={order.zipCode}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Zipcode\"\r\n          />\r\n          <input\r\n            name=\"town\"\r\n            value={order.town}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Town\"\r\n          />\r\n          <input\r\n            name=\"country\"\r\n            value={order.country}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Country\"\r\n          />\r\n          <p>{`Total: ${basketContext.basket\r\n            .filter((product) => store.products.some((p) => p === product._id))\r\n            .map((product) => product.price)\r\n            .reduce((partialSum, total) => partialSum + total, 0)} kr`}</p>\r\n          <button style={{ marginTop: \"10px\" }} type=\"submit\">\r\n            Checkout\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutItem;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport Stores from \"../staticData/Stores\";\r\nimport UserService from \"../services/UserService\";\r\nimport CheckoutItem from \"./CheckoutItem\";\r\n\r\nconst Checkout = () => {\r\n  const [stores, setStores] = useState([]);\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const basketContext = useContext(BasketContext);\r\n  const history = useHistory();\r\n\r\n  const getStores = () => {\r\n    UserService.getUsers().then((data) => {\r\n      if (data) {\r\n        setStores(data.users);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getStores();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setMessage(null);\r\n    }, 2000);\r\n  }, [message]);\r\n\r\n  return (\r\n    <>\r\n      <h1>Checkout</h1>\r\n      {message !== null && <p>{message.msgBody}</p>}\r\n      {basketContext.basket.length > 0 ? (\r\n        <div>\r\n          {stores.map((store) => {\r\n            if (\r\n              store.products.some((p) =>\r\n                basketContext.basket.some((product) => p === product._id)\r\n              )\r\n            ) {\r\n              return (\r\n                <CheckoutItem\r\n                  key={store._id}\r\n                  store={store}\r\n                  setMessage={setMessage}\r\n                />\r\n              );\r\n            } else {\r\n              return null;\r\n            }\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <p>No items...</p>\r\n          <button onClick={() => history.push(\"/\")}>Back to market</button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","export default {\r\n  getProducts: (userId) => {\r\n    return fetch(\"/users/user/getproducts\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(userId),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      return res.json().then((data) => data);\r\n    });\r\n  },\r\n  getMyProducts: () => {\r\n    return fetch(\"/users/user/getmyproducts\").then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  newProduct: (product) => {\r\n    return fetch(\"users/user/newproduct\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(product),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n  removeProduct: (product) => {\r\n    return fetch(\"/users/user/removeproduct\", {\r\n      method: \"post\",\r\n      body: JSON.stringify(product),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((res) => {\r\n      if (res.status !== 401) {\r\n        return res.json().then((data) => data);\r\n      } else {\r\n        return { message: { msgBody: \"Unauthorized\", msgError: true } };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { useState } from \"react\";\r\n\r\nconst OrderItem = (props) => {\r\n  const { order, removeOrder, handleOrder, orderHistory = false } = props;\r\n  const [showOrder, setShowOrder] = useState(false);\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          marginBottom: \"10px\",\r\n          borderBottom: \"1px solid #e1e1e1\",\r\n          padding: \"5px\",\r\n        }}\r\n      >\r\n        {!orderHistory && (\r\n          <p\r\n            style={{ marginRight: \"5px\" }}\r\n          >{`${order.firstname} ${order.lastname} | ${order.email}`}</p>\r\n        )}\r\n        {orderHistory && (\r\n          <p style={{ marginRight: \"5px\" }}>{`# ${order._id}`}</p>\r\n        )}\r\n        {!showOrder && (\r\n          <button onClick={() => setShowOrder(true)}>Show info</button>\r\n        )}\r\n        {showOrder && (\r\n          <button onClick={() => setShowOrder(false)}>Hide info</button>\r\n        )}\r\n        {!orderHistory && (\r\n          <button onClick={() => removeOrder(order)}>Remove</button>\r\n        )}\r\n        {!order.handled && !orderHistory && (\r\n          <button onClick={() => handleOrder(order)}>Handle</button>\r\n        )}\r\n        {order.handled && <p>Handled</p>}\r\n      </div>\r\n      {showOrder && (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            borderBottom: \"1px solid #e1e1e1\",\r\n            padding: \"0px\",\r\n          }}\r\n        >\r\n          {!orderHistory && (\r\n            <>\r\n              <div style={{ padding: \"0px 10px\" }}>\r\n                <p>{`Order number: ${order._id}`}</p>\r\n                <p>{`Name: ${order.firstname} ${order.lastname}`}</p>\r\n                <p>{`Phone: ${order.phone}`}</p>\r\n                <p>{`Email: ${order.email}`}</p>\r\n              </div>\r\n              <div style={{ padding: \"0px 10px\" }}>\r\n                <p style={{ fontWeight: \"bold\" }}>Adress</p>\r\n                <p>{`${order.street}`}</p>\r\n                <p>{`${order.zipCode}, ${order.town}`}</p>\r\n                <p>{`${order.country}`}</p>\r\n              </div>\r\n              <div style={{ padding: \"0px 10px\" }}>\r\n                <p style={{ fontWeight: \"bold\" }}>Products</p>\r\n                {order.products.map((product) => (\r\n                  <div key={product._id}>\r\n                    <p>{product.name}</p>\r\n                    <ul>\r\n                      <li>{`ID: ${product._id}`}</li>\r\n                      <li>{`Qty: ${product.count}`}</li>\r\n                      <li>{`Price: ${product.price}`}</li>\r\n                    </ul>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n          {orderHistory && (\r\n            <div style={{ padding: \"0px 10px\" }}>\r\n              <p>{`Order number: ${order._id}`}</p>\r\n              <p style={{ fontWeight: \"bold\" }}>Products</p>\r\n              {order.products.map((product) => (\r\n                <div key={product._id}>\r\n                  <p>{product.name}</p>\r\n                  <ul>\r\n                    <li>{`ID: ${product._id}`}</li>\r\n                    <li>{`Qty: ${product.count}`}</li>\r\n                    <li>{`Price: ${product.price}`}</li>\r\n                  </ul>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport UserService from \"../services/UserService\";\r\n\r\nconst PersonalInfo = (props) => {\r\n  const { authContext, setMessage } = props;\r\n\r\n  const [personalInfo, setPersonalInfo] = useState({\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [addingPersonalInfo, setAddingPersonalInfo] = useState(false);\r\n\r\n  const onChangePerInfo = (e) => {\r\n    setPersonalInfo({ ...personalInfo, [e.target.name]: e.target.value });\r\n  };\r\n  const addPersonalInfo = (e) => {\r\n    e.preventDefault();\r\n    UserService.updateUser(personalInfo).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        authContext.setUser({\r\n          ...authContext.user,\r\n          firstname: personalInfo.firstname,\r\n          lastname: personalInfo.lastname,\r\n          email: personalInfo.email,\r\n          phone: personalInfo.phone,\r\n        });\r\n        setMessage(message);\r\n        setAddingPersonalInfo(false);\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (addingPersonalInfo) {\r\n      setPersonalInfo({\r\n        ...personalInfo,\r\n        firstname: authContext.user.firstname,\r\n        lastname: authContext.user.lastname,\r\n        email: authContext.user.email,\r\n        phone: authContext.user.phone,\r\n      });\r\n    }\r\n  }, [addingPersonalInfo]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        margin: \"10px 0px\",\r\n        padding: \"10px 0px\",\r\n        borderBottom: \"1px solid #e1e1e1\",\r\n      }}\r\n    >\r\n      <p\r\n        style={{ margin: \"0px 5px 0px 0px\" }}\r\n      >{`Welcome ${authContext.user.username}`}</p>\r\n      {!addingPersonalInfo && (\r\n        <div style={{ display: \"flex\" }}>\r\n          <button onClick={() => setAddingPersonalInfo(true)}>\r\n            Add/change personal info\r\n          </button>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>\r\n            {authContext.user.firstname}\r\n          </p>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>\r\n            {authContext.user.lastname}\r\n          </p>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>{authContext.user.email}</p>\r\n          <p style={{ margin: \"0px 5px 0px 5px\" }}>{authContext.user.phone}</p>\r\n        </div>\r\n      )}\r\n      {addingPersonalInfo && (\r\n        <form style={{ display: \"flex\" }} onSubmit={addPersonalInfo}>\r\n          <input\r\n            name=\"firstname\"\r\n            value={personalInfo.firstname}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Firstname\"\r\n          />\r\n          <input\r\n            name=\"lastname\"\r\n            value={personalInfo.lastname}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Lastname\"\r\n          />\r\n          <input\r\n            name=\"email\"\r\n            value={personalInfo.email}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Email\"\r\n          />\r\n          <input\r\n            name=\"phone\"\r\n            value={personalInfo.phone}\r\n            onChange={onChangePerInfo}\r\n            placeholder=\"Phone\"\r\n          />\r\n          <button type=\"submit\">Add</button>\r\n          <button onClick={() => setAddingPersonalInfo(false)}>Cancel</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonalInfo;\r\n","import React, { useState } from \"react\";\r\nimport ProductService from \"../services/ProductService\";\r\n\r\nconst Products = (props) => {\r\n  const {\r\n    authContext,\r\n    setMessage,\r\n    products,\r\n    setProducts,\r\n    removeProduct,\r\n  } = props;\r\n\r\n  const [product, setProduct] = useState({\r\n    id: null,\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n  });\r\n\r\n  const [addingProduct, setAddingProduct] = useState(false);\r\n\r\n  const onChange = (e) => {\r\n    setProduct({ ...product, [e.target.name]: e.target.value });\r\n  };\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    ProductService.newProduct(product).then((data) => {\r\n      const { message } = data;\r\n      resetForm();\r\n      if (!message.msgError) {\r\n        ProductService.getMyProducts().then((data) => {\r\n          if (data) {\r\n            setProducts(data.products);\r\n            setMessage(message);\r\n          }\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n  const resetForm = () => {\r\n    setProduct({ name: \"\", description: \"\", price: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p style={{ fontWeight: \"bold\" }}>Products</p>\r\n      {!addingProduct && (\r\n        <button onClick={() => setAddingProduct(true)}>Add product</button>\r\n      )}\r\n      {addingProduct && (\r\n        <form\r\n          onSubmit={onSubmit}\r\n          style={{ display: \"flex\", flexDirection: \"column\" }}\r\n        >\r\n          <input\r\n            name=\"name\"\r\n            value={product.name}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Name\"\r\n          />\r\n          <input\r\n            name=\"description\"\r\n            value={product.description}\r\n            onChange={onChange}\r\n            placeholder=\"Description\"\r\n          />\r\n          <input\r\n            name=\"price\"\r\n            value={product.price}\r\n            onChange={onChange}\r\n            required\r\n            placeholder=\"Price\"\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button onClick={() => setAddingProduct(false)}>Close</button>\r\n        </form>\r\n      )}\r\n      <div>\r\n        {products.map((product) => (\r\n          <div\r\n            key={product._id}\r\n            style={{\r\n              padding: \"10px 0px\",\r\n              borderBottom: \"1px solid #e1e1e1\",\r\n            }}\r\n          >\r\n            <p style={{ fontWeight: \"bold\" }}>{product.name}</p>\r\n            <p>{`${product.price} kr`}</p>\r\n            <p>{product.description}</p>\r\n            <button onClick={() => removeProduct(product)}>Remove</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AddressService from \"../services/AddressService\";\r\n\r\nconst Address = (props) => {\r\n  const { authContext, setMessage } = props;\r\n\r\n  const [address, setAddress] = useState({\r\n    id: null,\r\n    street: \"\",\r\n    zipCode: \"\",\r\n    town: \"\",\r\n    country: \"\",\r\n  });\r\n  const [addingAddress, setAddingAddress] = useState(false);\r\n  const [changingAddress, setChangingAddress] = useState(false);\r\n\r\n  const onChangeAddress = (e) => {\r\n    setAddress({ ...address, [e.target.name]: e.target.value });\r\n  };\r\n  const addAddress = (e) => {\r\n    e.preventDefault();\r\n    AddressService.newAddress(address).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        AddressService.getAddress().then((data) => {\r\n          setAddingAddress(false);\r\n          setAddress(data.address);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const changeAddress = (e) => {\r\n    e.preventDefault();\r\n    AddressService.updateAddress(address).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        AddressService.getAddress().then((data) => {\r\n          setChangingAddress(false);\r\n          setAddress(data.address);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (authContext.user.username !== \"\") {\r\n      AddressService.getAddress().then((data) => {\r\n        if (data && data.address) {\r\n          setAddress(data.address);\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <p style={{ fontWeight: \"bold\" }}>Address</p>\r\n      {!addingAddress &&\r\n        address.street === \"\" &&\r\n        address.zipCode === \"\" &&\r\n        address.town === \"\" &&\r\n        address.country === \"\" && (\r\n          <button onClick={() => setAddingAddress(true)}>Add address</button>\r\n        )}\r\n      {!changingAddress &&\r\n        (address.street !== \"\" ||\r\n          address.zipCode !== \"\" ||\r\n          address.town !== \"\" ||\r\n          address.country !== \"\") && (\r\n          <button onClick={() => setChangingAddress(true)}>\r\n            Change address\r\n          </button>\r\n        )}\r\n      {addingAddress && (\r\n        <form\r\n          onSubmit={addAddress}\r\n          style={{ display: \"flex\", flexDirection: \"column\" }}\r\n        >\r\n          <input\r\n            name=\"street\"\r\n            value={address.street}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Street\"\r\n          />\r\n          <input\r\n            name=\"zipCode\"\r\n            value={address.zipCode}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Zipcode\"\r\n          />\r\n          <input\r\n            name=\"town\"\r\n            value={address.town}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Town\"\r\n          />\r\n          <input\r\n            name=\"country\"\r\n            value={address.country}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"country\"\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button onClick={() => setAddingAddress(false)}>Close</button>\r\n        </form>\r\n      )}\r\n      {changingAddress && (\r\n        <form\r\n          onSubmit={changeAddress}\r\n          style={{ display: \"flex\", flexDirection: \"column\" }}\r\n        >\r\n          <input\r\n            name=\"street\"\r\n            value={address.street}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Street\"\r\n          />\r\n          <input\r\n            name=\"zipCode\"\r\n            value={address.zipCode}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Zipcode\"\r\n          />\r\n          <input\r\n            name=\"town\"\r\n            value={address.town}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"Town\"\r\n          />\r\n          <input\r\n            name=\"country\"\r\n            value={address.country}\r\n            onChange={onChangeAddress}\r\n            required\r\n            placeholder=\"country\"\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button onClick={() => setChangingAddress(false)}>Close</button>\r\n        </form>\r\n      )}\r\n      <p>{address.street}</p>\r\n      <p>{address.zipCode}</p>\r\n      <p>{address.town}</p>\r\n      <p>{address.country}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Address;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport ProductService from \"../services/ProductService\";\r\nimport OrderService from \"../services/OrderService\";\r\nimport UserService from \"../services/UserService\";\r\nimport OrderItem from \"./OrderItem\";\r\nimport AddressService from \"../services/AddressService\";\r\nimport PersonalInfo from \"./PersonalInfo\";\r\nimport Products from \"./Products\";\r\nimport Address from \"./Address\";\r\n\r\nconst Account = () => {\r\n  const authContext = useContext(AuthContext);\r\n\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  const [orderHistory, setOrderHistory] = useState([]);\r\n\r\n  //message state to be used for snackbar notifications later\r\n  const [message, setMessage] = useState(null);\r\n\r\n  //Product handlers\r\n  const removeProduct = (product) => {\r\n    ProductService.removeProduct(product).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        ProductService.getMyProducts().then((data) => {\r\n          setProducts(data.products);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  //order handlers\r\n  const removeOrder = (order) => {\r\n    OrderService.removeOrder(order).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        OrderService.getOrders().then((data) => {\r\n          setOrders(data.orders);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleOrder = (order) => {\r\n    OrderService.handleOrder(order).then((data) => {\r\n      const { message } = data;\r\n      if (!message.msgError) {\r\n        OrderService.getOrders().then((data) => {\r\n          setOrders(data.orders);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === \"Unauthorized\") {\r\n        setMessage(message);\r\n        authContext.setUser({ username: \"\" });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (authContext.user.username !== \"\") {\r\n      ProductService.getMyProducts().then((data) => {\r\n        if (data && data.products) {\r\n          setProducts(data.products);\r\n        }\r\n      });\r\n      OrderService.getOrders().then((data) => {\r\n        if (data && data.orders) {\r\n          setOrders(data.orders);\r\n        }\r\n      });\r\n      OrderService.getOrderHistory().then((data) => {\r\n        setOrderHistory(data.orderHistory);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>Account</h1>\r\n      <PersonalInfo authContext={authContext} setMessage={setMessage} />\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          margin: \"10px 0px\",\r\n          justifyContent: \"space-between\",\r\n        }}\r\n      >\r\n        <Products\r\n          authContext={authContext}\r\n          setMessage={setMessage}\r\n          products={products}\r\n          setProducts={setProducts}\r\n          removeProduct={removeProduct}\r\n        />\r\n        <div>\r\n          <p style={{ fontWeight: \"bold\" }}>\r\n            Incoming orders (\r\n            {orders.filter((order) => order.handled === false).length})\r\n          </p>\r\n          {orders\r\n            .slice()\r\n            .reverse()\r\n            .map((order) => (\r\n              <OrderItem\r\n                key={order._id}\r\n                order={order}\r\n                removeOrder={removeOrder}\r\n                handleOrder={handleOrder}\r\n              />\r\n            ))}\r\n        </div>\r\n        <Address authContext={authContext} setMessage={setMessage} />\r\n      </div>\r\n      <div style={{ padding: \"20px 20px 0px 0px\", width: \"33%\" }}>\r\n        <p style={{ fontWeight: \"bold\", marginTop: \"0px\" }}>Order history</p>\r\n        {orderHistory.map((order) => (\r\n          <OrderItem\r\n            order={order}\r\n            key={order._id}\r\n            removeOrder={removeOrder}\r\n            orderHistory={true}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Stores from \"../staticData/Stores\";\r\nimport Products from \"../staticData/Products\";\r\nimport { BasketContext } from \"../context/BasketContext\";\r\nimport ProductService from \"../services/ProductService\";\r\n\r\nconst InsideStore = (props) => {\r\n  const basketContext = useContext(BasketContext);\r\n\r\n  const { id } = props.match.params;\r\n\r\n  //const [storesData, setStoresData] = useState(Stores.getStores());\r\n  //const [productsData, setProductsData] = useState(Products.getProducts());\r\n  //const [storeProductsIds, setStoreProductsIds] = useState([]);\r\n  const [store, setStore] = useState(\"\");\r\n  const [products, setProducts] = useState([]);\r\n\r\n  //Sets the store state to the item in the Stores.getStores()-array to the item that has an id that matches the id from the url param\r\n  /*useEffect(() => {\r\n    setStore(storesData.find((store) => store.id.toString() === id));\r\n  }, []);\r\n\r\n  //Creates an array of ids retieved from the stores (store state) products array\r\n  useEffect(() => {\r\n    setStoreProductsIds(store.products);\r\n  }, [store]);\r\n\r\n  //Sets the products state to an array of products which ids mathes the ids from the storeProductIds (storeProductIds state) array\r\n  useEffect(() => {\r\n    if (storeProductsIds)\r\n      setProducts(\r\n        productsData.filter((product) =>\r\n          storeProductsIds.some((id) => id === product.id)\r\n        )\r\n      );\r\n  }, [storeProductsIds]);*/\r\n\r\n  useEffect(() => {\r\n    ProductService.getProducts({ _id: id }).then((data) => {\r\n      if (data) {\r\n        setProducts(data.products);\r\n        setStore(data.username);\r\n      }\r\n    });\r\n  }, [id]);\r\n\r\n  //Adds a product object to the cart and assigns it a counter property\r\n  const addToCart = (product) => {\r\n    const same = basketContext.basket.filter((item) => item === product);\r\n    Object.assign(product, {\r\n      count: same.length + 1,\r\n      price: parseInt(product.price),\r\n    });\r\n    basketContext.setBasket([...basketContext.basket, product]);\r\n  };\r\n\r\n  console.log(basketContext.basket);\r\n\r\n  return (\r\n    <div>\r\n      <h1>{store}</h1>\r\n      <h3>Products</h3>\r\n      <div>\r\n        {products.map((product) => (\r\n          <div key={product._id}>\r\n            <p>{`${product.name} - ${product.price} kr`}</p>\r\n            <button onClick={() => addToCart(product)}>Add to cart</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InsideStore;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const authContext = useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (!authContext.isAuthenticated) {\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: \"/login\", state: { from: props.location } }}\r\n            />\r\n          );\r\n        }\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nconst UnPrivateRoute = ({ component: Component, ...rest }) => {\r\n  const authContext = useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (authContext.isAuthenticated) {\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: \"/account\", state: { from: props.location } }}\r\n            />\r\n          );\r\n        }\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default UnPrivateRoute;\r\n","import React, { useContext } from \"react\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport { BasketContext } from \"./context/BasketContext\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport Loppis from \"./components/Loppis\";\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport Checkout from \"./components/Checkout\";\nimport Account from \"./components/Account\";\nimport InsideStore from \"./components/InsideStore\";\nimport PrivateRoute from \"./hocs/PrivateRoute\";\nimport UnPrivateRoute from \"./hocs/UnPrivateRoute\";\n\nfunction App() {\n  const authContext = useContext(AuthContext);\n  const basketContext = useContext(BasketContext);\n\n  console.log(authContext.isAuthenticated);\n  console.log(basketContext);\n\n  return (\n    <Router>\n      <Navbar />\n      <Route exact path=\"/\" component={Loppis} />\n      <PrivateRoute path=\"/account\" component={Account} />\n      <UnPrivateRoute path=\"/login\" component={Login} />\n      <UnPrivateRoute path=\"/register\" component={Register} />\n      <Route path=\"/checkout\" component={Checkout} />\n      <Route path=\"/insidestore/:id\" component={InsideStore} />\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport AuthProvider from \"./context/AuthContext\";\nimport BasketProvider from \"./context/BasketContext\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthProvider>\n      <BasketProvider>\n        <App />\n      </BasketProvider>\n    </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}